{
	admin off
	persist_config off
	auto_https off

	log {
		format json
	}

	servers {
		trusted_proxies static private_ranges
	}
}

:{$PORT:80} {
	log {
		format json
	}

	respond /health 200

	header {
		X-XSS-Protection "1; mode=block"
		X-Content-Type-Options "nosniff"
		Referrer-Policy "strict-origin-when-cross-origin"
		-Server
	}

	root * public

	file_server {
		hide .git
		hide .env*
	}

	encode {
		gzip
		zstd
	}

	try_files {path} {path}.html {path}/index.html /index.html

	handle_errors {
		rewrite * /{err.status_code}.html
		file_server
	}
}
